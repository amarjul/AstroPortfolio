---
import "../styles/home.css";
import "../styles/career.css";
import "../styles/page-transitions.css";
import Navigation from "../components/Navigation.astro";
import Footer from "../components/Footer.astro";
import { siteConfig } from "../config/site";
---

<html lang="de">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content={Astro.generator} />
    <title>Karriere - {siteConfig.name}</title>
    <script>
      if ("scrollRestoration" in history) {
        history.scrollRestoration = "manual";
      }
      window.scrollTo(0, 0);
    </script>
  </head>
  <body>
    <Navigation />

    <main class="career-page">
      <div class="career-page-container page-content">
        <div class="career-header career-header-animate">
          <h1 class="career-title">{siteConfig.career.title}</h1>
          <p class="career-subtitle">{siteConfig.career.subtitle}</p>
        </div>

        <div class="timeline-section career-content-animate">
  <!-- Bildung Timeline -->
  <div class="timeline-group">
    <h2 class="timeline-group-title education">ðŸŽ“ Ausbildung</h2>
    <div class="timeline-container">
      {siteConfig.career.timeline
        .filter((item) => item.type === "education")
        .map((item) => (
          <div class="timeline-item">
            <div class={`timeline-dot ${item.type}`}></div>
            <div class="timeline-card">
              <span class={`timeline-year ${item.type}`}>{item.year}</span>
              <h3 class="timeline-role">{item.role}</h3>
              <div class="timeline-location">{item.location}</div>
              <p class="timeline-description">{item.description}</p>
            </div>
          </div>
        ))}
    </div>
  </div>

  <!-- Arbeit Timeline -->
  {siteConfig.career.timeline.filter((item) => item.type === "work").length > 0 && (
    <div class="timeline-group">
      <h2 class="timeline-group-title work">ðŸ’¼ Berufserfahrung</h2>
      <div class="timeline-container">
        {siteConfig.career.timeline
          .filter((item) => item.type === "work")
          .map((item) => (
            <div class="timeline-item">
              <div class={`timeline-dot ${item.type}`}></div>
              <div class="timeline-card">
                <span class={`timeline-year ${item.type}`}>{item.year}</span>
                <h3 class="timeline-role">{item.role}</h3>
                <div class="timeline-location">{item.location}</div>
                <p class="timeline-description">{item.description}</p>
              </div>
            </div>
          ))}
      </div>
    </div>
  )}
</div>

        <div class="skills-section career-content-animate">
          <h2 class="skills-title">{siteConfig.career.skills.title}</h2>
          <div class="skills-grid">
            {siteConfig.career.skills.categories.map((category) => (
              <div class="skill-category">
                <h3 class="skill-category-name">{category.name}</h3>
                <div class="skill-items">
                  {category.items.map((item) => (
                    <span class="skill-item">{item}</span>
                  ))}
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </main>

    <Footer />

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        window.scrollTo(0, 0);
        setTimeout(() => window.scrollTo(0, 0), 0);
      });

      window.addEventListener("pageshow", (event) => {
        if (event.persisted) {
          window.scrollTo(0, 0);
        }
      });

      document.addEventListener("DOMContentLoaded", () => {
        const pageContent = document.querySelector(".page-content");
        if (pageContent) {
          requestAnimationFrame(() => {
            pageContent.classList.add("visible");
          });
        } 

        const header = document.querySelector(".career-header-animate");
        if (header) {
          requestAnimationFrame(() => {
            header.classList.add("visible");
          });
        }

        const contentElements = document.querySelectorAll(".career-content-animate");
        contentElements.forEach((element) => {
          requestAnimationFrame(() => {
            element.classList.add("visible");
          });
        });
      });
    </script>
  </body>
</html>